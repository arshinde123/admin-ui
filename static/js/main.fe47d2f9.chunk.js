(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{29:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(10),c=n.n(s),i=(n(27),n(28),n(29),n(2)),l=(n(30),n(12)),o=n.n(l),d=n(22),u=n(13),h=n(9),p=n(4),j=n(5),b=n(7),m=n(6),g=n(8),f=n.n(g);var O={log:function(e){console.error(e)}};f.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"/admin-ui",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).ADMIN_UI_API_URL||"https://geektrust.s3-ap-southeast-1.amazonaws.com",f.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(O.log(e),i.c.error("An unexpected error occurrred.")),Promise.reject(e)}));var C={get:f.a.get,post:f.a.post,put:f.a.put,delete:f.a.delete};function x(e,t,n){var a=(t-1)*n;return e.slice(a,a+n)}var k=n(0),v=function(e){var t=e.itemsCount,n=e.pageSize,a=e.currentPage,r=e.onPageChange,s=Math.ceil(t/n);if(1===s)return null;var c=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=[],r=0;r<t;r++)0===r?a.push(e):a.push(a[a.length-1]+n);return a}(1,s);return Object(k.jsx)("div",{className:"float-end",children:Object(k.jsx)("nav",{"aria-label":"Page navigation",children:Object(k.jsxs)("ul",{className:"pagination",children:[Object(k.jsx)("li",{className:1===a?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"first",onClick:function(){return r(1)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),Object(k.jsx)("li",{className:1===a?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"Previous",onClick:function(){return r(a-1)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:"<"})})}),c.map((function(e){return Object(k.jsx)("li",{className:e===a?"page-item active":"page-item",children:Object(k.jsx)("a",{onClick:function(){return r(e)},className:"page-link",children:e})},e)})),Object(k.jsx)("li",{className:a===c.length?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"Next",onClick:function(){return r(a+1)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:">"})})}),Object(k.jsx)("li",{className:a===c.length?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"last",onClick:function(){return r(c.length)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})})},U=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(k.jsx)("thead",{children:Object(k.jsx)("tr",{children:this.props.columns.map((function(t){return Object(k.jsx)("th",{className:"clickable",children:t.label instanceof Function?t.label(e.props.columnProps):t.label},t.path||t.key)}))})})}}]),n}(a.Component),N=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,n,a){return t.content?t.content(e,n,e.id===a.id):e[t.path]},e.renderEditCell=function(t,n,a,r,s,c){return"inputText"===r?Object(k.jsx)("div",{className:"input-group",children:Object(k.jsx)("input",{type:"text",className:"form-control",value:c[n.path],onChange:function(e){a.handleItemUpdateData(e,n.path,t)}})}):"inputSelect"===r?Object(k.jsx)("select",{id:e.createKey(t,n),className:"form-select",name:n.path||n.key,value:c[n.path],onChange:function(e){return a.handleItemUpdateData(e,n.path,t)},children:s.map((function(e){return Object(k.jsx)("option",{value:e.toLowerCase(),children:e},t.id+e)}))}):void 0},e.createKey=function(e,t){return e.id+(t.path||t.key)},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns,r=t.rowProps,s=t.columnProps,c=t.editItem;return Object(k.jsx)("tbody",{children:n.map((function(t){return Object(k.jsx)("tr",{className:t.checked?r.rowCheckedClass:"",children:a.map((function(n){return Object(k.jsx)("td",{children:!0===n.editable&&t.id===c.id?e.renderEditCell(t,n,s,n.editType,n.editData,c):e.renderCell(t,n,s,c)},e.createKey(t,n))}))},t.id)}))})}}]),n}(a.Component),P=function(e){var t=e.columns,n=e.data,a=e.rowProps,r=e.columnProps,s=e.editItem;return Object(k.jsxs)("table",{className:"table table-hover",style:{overflow:"scroll"},children:[Object(k.jsx)(U,{columns:t,columnProps:r,rowProps:a}),Object(k.jsx)(N,{data:n,columns:t,columnProps:r,editItem:s,rowProps:a})]})},y=(n(51),function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).columns=[{path:"check",label:function(t){return e.getCheckAllContent(t)},key:"check",content:function(t,n){return e.getCheckContent(t,n)},editable:!1},{path:"name",label:"Name",editable:!0,editType:"inputText",editData:""},{path:"email",label:"Email",editable:!0,editType:"inputText",editData:""},{path:"role",label:"Role",editable:!0,editType:"inputSelect",editData:["Admin","Member"]},{path:"actions",label:"Actions",key:"actions",content:function(t,n,a){return e.getActionsContent(t,n,a)},editable:!1}],e.getCheckAllContent=function(e){return Object(k.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.usersCount===e.checkedUsersCount,id:"checkAllUsers",onChange:function(t){return e.handleAllCheck(t.target.checked)}})},e.getCheckContent=function(e,t){return Object(k.jsx)("div",{className:"form-check",children:Object(k.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.checked,id:e.id,onChange:function(n){return t.handleCheck(n.target.checked,e)}})})},e.getActionsContent=function(e,t,n){return n?Object(k.jsxs)("div",{className:"mt-2",children:[Object(k.jsx)("i",{className:"bi bi-check-lg text-primary",onClick:function(){return t.handleEditCompleted()}}),Object(k.jsx)("i",{className:"bi bi-x-lg text-danger mx-2",onClick:function(){return t.handleEditCancel()}})]}):Object(k.jsxs)("div",{children:[Object(k.jsx)("i",{className:"bi bi-pencil-square text-primary",onClick:function(){return t.handleEditUser(e)}}),Object(k.jsx)("i",{className:"bi bi-trash text-danger mx-2",onClick:function(){return t.handleDeleteUser(e)}})]})},e.getSwitchRowContent=function(e,t,n){return Object(k.jsxs)("div",{style:{display:"flex"},children:[Object(k.jsx)("div",{style:{marginRight:"5px",cursor:"pointer"},onClick:function(){return t.onDownClick(e)},children:"\u2193"}),Object(k.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return t.onUpClick(e)},children:"\u2191"})]})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.users,n=e.editUser,a=e.usersCount,r=e.checkedUsersCount,s=e.handleCheck,c=e.handleAllCheck,i=e.handleDeleteUser,l=e.handleEditUser,o=e.handleEditCompleted,d=e.handleEditCancel,u=e.handleUpdateUser,h={checkedUsersCount:r,usersCount:a,handleCheck:s,handleAllCheck:c,handleDeleteUser:i,handleEditUser:l,handleEditCompleted:o,handleEditCancel:d,handleUpdateUser:u,handleItemUpdateData:u,onDownClick:e.onDownClick,onUpClick:e.onUpClick};return Object(k.jsx)(P,{columns:this.columns,data:t,rowProps:{rowCheckedClass:"th-background"},columnProps:h,editItem:n})}}]),n}(a.Component)),S=function(e){var t=e.value,n=e.onChange,a=e.onFocus,r=e.totalCount,s=e.placeholder;return Object(k.jsxs)("div",{className:"input-group mb-3",children:[Object(k.jsx)("input",{type:"text",value:t,className:"form-control",placeholder:s,onChange:function(e){return n(e.currentTarget.value)},onFocus:function(e){return a(e)}}),Object(k.jsxs)("span",{className:"input-group-text",children:["Total users \xa0\xa0",Object(k.jsx)("span",{className:"badge bg-primary",children:r})]})]})},w=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={users:[],pageSize:10,currentPage:1,searchQuery:"",isLoading:!1,checkedUsers:[],editUser:{}},e.handleSearch=function(t){e.state.editUser.id||(e.handleResetAllCheckedUsers(),e.setState({searchQuery:t,currentPage:1}))},e.handleSearchFocus=function(){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes")},e.handlePageChange=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");e.handleResetAllCheckedUsers(),e.setState({currentPage:t})},e.handleCheck=function(t,n){if(t){var a=[].concat(Object(h.a)(e.state.checkedUsers),[n.id]);e.setState({checkedUsers:a})}else{var r=Object(h.a)(e.state.checkedUsers);r=r.filter((function(e){return e!==n.id})),e.setState({checkedUsers:r})}},e.handleAllCheck=function(t){var n=e.getPagedData().data,a=[];n&&n.length&&t&&(a=n.map((function(e){return e.id}))),e.setState({checkedUsers:a})},e.handleResetAllCheckedUsers=function(){e.setState({checkedUsers:[]})},e.handleEditUser=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");e.setState({editUser:t})},e.handleUpdateUser=function(t,n){var a=Object(u.a)({},e.state.editUser);a[n]=t.target.value,e.setState({editUser:a})},e.handleEditCompleted=function(){var t=Object(h.a)(e.state.users),n=Object(u.a)({},e.state.editUser);t=t.map((function(e){return e.id===n.id&&(e=n),e})),e.setState({users:t,editUser:{}}),i.c.success("User details updated")},e.handleEditCancel=function(){e.setState({editUser:{}}),i.c.info("User details discarded")},e.handleDeleteUser=function(t){var n=t.id;if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");var a=Object(h.a)(e.state.users);a=a.filter((function(e){return e.id!==n})),e.setState({users:a}),i.c.info("User deleted",{position:i.c.POSITION.TOP_RIGHT})},e.handleDeleteCheckedUsers=function(){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");var t=Object(h.a)(e.state.checkedUsers),n=Object(h.a)(e.state.users);t.length?(n=n.filter((function(e){return!t.includes(e.id)})),i.c.info("".concat(t.length," ").concat(t.length>1?"users":"user"," deleted"),{position:i.c.POSITION.TOP_RIGHT}),e.setState({users:n,checkedUsers:[]}),e.handleResetAllCheckedUsers()):i.c.error("Please select user(s) to delete",{transition:i.a})},e.onDownClick=function(t){var n=e.state.users,a=n,r=n.indexOf(t),s=n[r];r===n.length-1?i.c.info("No place to shift downwards",{position:i.c.POSITION.TOP_RIGHT}):(a[r]=a[r+1],a[r+1]=s,e.setState({users:a}))},e.onUpClick=function(t){var n=e.state.users,a=n,r=n.indexOf(t),s=n[r];0===r?i.c.info("No place to shift upwards",{position:i.c.POSITION.TOP_RIGHT}):(a[r]=a[r-1],a[r-1]=s,e.setState({users:a}))},e.getPagedData=function(){var t=e.state,n=t.pageSize,a=t.currentPage,r=t.users,s=t.searchQuery,c=t.checkedUsers,i=r||[];s&&(i=r.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.role.toLowerCase().includes(s.toLowerCase())})));var l=x(i,a,n);return l=c.length?l.map((function(e){return e.checked=c.includes(e.id),e})):l.map((function(e){return e.checked=!1,e})),{totalCount:i.length,data:l}},e.renderLoader=function(){return Object(k.jsx)("div",{className:"spinner-grow text-primary position-absolute bottom-50 end-50",role:"status",children:Object(k.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},e.renderSearchBox=function(t){return Object(k.jsx)("div",{className:"row mt-5",children:Object(k.jsx)("div",{className:"row mt-5",children:Object(k.jsx)(S,{value:e.state.searchQuery,onChange:e.handleSearch,onFocus:e.handleSearchFocus,totalCount:t,placeholder:"Search by name, email, role"})})})},e.renderNoUserFound=function(){return Object(k.jsx)("span",{className:"badge bg-danger mb-5",children:"No user(s) found"})},e.renderUserTable=function(t){var n=e.state,a=n.checkedUsers,r=n.editUser;return Object(k.jsx)("div",{className:"row mx-1",style:{overflowX:"auto"},children:Object(k.jsx)(y,{users:t,checkedUsersCount:a.length,editUser:r,usersCount:t.length,onDelete:e.handleDelete,handleDeleteUser:e.handleDeleteUser,handleCheck:e.handleCheck,handleAllCheck:e.handleAllCheck,handleEditUser:e.handleEditUser,handleUpdateUser:e.handleUpdateUser,handleEditCompleted:e.handleEditCompleted,handleEditCancel:e.handleEditCancel,onDownClick:e.onDownClick,onUpClick:e.onUpClick})})},e.renderDeleteSelectedUser=function(){var t=e.state.checkedUsers;return Object(k.jsx)("div",{className:"col-md-3 col-xs-12 mb-2",children:Object(k.jsxs)("button",{type:"button",className:"btn btn-outline-danger",onClick:e.handleDeleteCheckedUsers,children:["Delete selected"," ",t.length>0&&Object(k.jsx)("span",{className:"badge bg-danger",children:t.length})]})})},e.renderPagination=function(t){var n=e.state,a=n.pageSize,r=n.currentPage;return Object(k.jsx)("div",{className:"col-md-9 col-xs-12",children:Object(k.jsx)(v,{itemsCount:t,pageSize:a,onPageChange:e.handlePageChange,currentPage:r})})},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){var t,n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,C.get("/adminui-problem/members.json");case 4:t=e.sent,n=t.data,setTimeout((function(){return a.setState({users:n,isLoading:!1})}),2e3),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),i.c.error("Error while fetching users"),this.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.getPagedData(),t=e.totalCount,n=e.data;return this.state.isLoading?this.renderLoader():(!n.length&&this.state.currentPage>1&&this.handlePageChange(this.state.currentPage-1),Object(k.jsxs)(r.a.Fragment,{children:[this.renderSearchBox(t),n.length?Object(k.jsxs)(r.a.Fragment,{children:[this.renderUserTable(n),Object(k.jsxs)("div",{className:"row",children:[this.renderDeleteSelectedUser(),this.renderPagination(t)]})]}):this.renderNoUserFound()]}))}}]),n}(a.Component);n(52);var D=function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)(i.b,{}),Object(k.jsx)("nav",{className:"navbar navbar-light bg-primary",children:Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsx)("a",{className:"navbar-brand text-light",children:"Admin-UI"})})}),Object(k.jsx)("div",{className:"mx-5",children:Object(k.jsx)(w,{})})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(D,{})}),document.getElementById("root")),T()}},[[53,1,2]]]);
//# sourceMappingURL=main.fe47d2f9.chunk.js.map