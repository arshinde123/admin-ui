(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{30:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(11),c=n.n(s),i=(n(28),n(29),n(30),n(2)),l=(n(31),n(14)),o=n.n(l),d=n(23),u=n(12),h=n(10),p=n(4),b=n(5),j=n(8),m=n(7),g=n(6),f=n.n(g),C=n(9),O=n.n(C);var x={log:function(e){console.error(e)}};O.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"/admin-ui",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).ADMIN_UI_API_URL||"https://geektrust.s3-ap-southeast-1.amazonaws.com",O.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(x.log(e),i.c.error("An unexpected error occurrred.")),Promise.reject(e)}));var k={get:O.a.get,post:O.a.post,put:O.a.put,delete:O.a.delete};var v=n(0),U=function(e){var t=e.itemsCount,n=e.pageSize,a=e.currentPage,r=e.onPageChange,s=Math.ceil(t/n);if(1===s)return null;var c=f.a.range(1,s+1);return Object(v.jsx)("div",{className:"float-end",children:Object(v.jsx)("nav",{"aria-label":"Page navigation",children:Object(v.jsxs)("ul",{className:"pagination",children:[Object(v.jsx)("li",{className:1===a?"page-item disabled":"page-item",children:Object(v.jsx)("a",{className:"page-link","aria-label":"first",onClick:function(){return r(1)},children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),Object(v.jsx)("li",{className:1===a?"page-item disabled":"page-item",children:Object(v.jsx)("a",{className:"page-link","aria-label":"Previous",onClick:function(){return r(a-1)},children:Object(v.jsx)("span",{"aria-hidden":"true",children:"<"})})}),c.map((function(e){return Object(v.jsx)("li",{className:e===a?"page-item active":"page-item",children:Object(v.jsx)("a",{onClick:function(){return r(e)},className:"page-link",children:e})},e)})),Object(v.jsx)("li",{className:a===c.length?"page-item disabled":"page-item",children:Object(v.jsx)("a",{className:"page-link","aria-label":"Next",onClick:function(){return r(a+1)},children:Object(v.jsx)("span",{"aria-hidden":"true",children:">"})})}),Object(v.jsx)("li",{className:a===c.length?"page-item disabled":"page-item",children:Object(v.jsx)("a",{className:"page-link","aria-label":"last",onClick:function(){return r(c.length)},children:Object(v.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})})};function S(e,t,n){var a=(t-1)*n;return f()(e).slice(a).take(n).value()}var N=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).raiseSort=function(t,n){if(n){var a=Object(u.a)({},e.props.sortColumn);a.path===t?a.order="asc"===a.order?"desc":"asc":(a.path=t,a.order="asc"),e.props.onSort(a)}},e.renderSortIcon=function(t){return t.path!==e.props.sortColumn.path?null:"asc"===e.props.sortColumn.order?Object(v.jsx)("i",{className:"bi bi-sort-alpha-down"}):Object(v.jsx)("i",{className:"bi bi-sort-alpha-up"})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:this.props.columns.map((function(t){return Object(v.jsxs)("th",{className:"clickable",onClick:function(){return e.raiseSort(t.path,t.enableSort)},children:[t.label instanceof Function?t.label(e.props.columnProps):t.label,"\xa0",e.renderSortIcon(t)]},t.path||t.key)}))})})}}]),n}(a.Component),y=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,n,a){return t.content?t.content(e,n,e.id===a.id):f.a.get(e,t.path)},e.renderEditCell=function(t,n,a,r,s,c){return"inputText"===r?Object(v.jsx)("div",{className:"input-group",children:Object(v.jsx)("input",{type:"text",className:"form-control",value:c[n.path],onChange:function(e){a.handleItemUpdateData(e,n.path,t)}})}):"inputSelect"===r?Object(v.jsx)("select",{id:e.createKey(t,n),className:"form-select",name:n.path||n.key,value:c[n.path],onChange:function(e){return a.handleItemUpdateData(e,n.path,t)},children:s.map((function(e){return Object(v.jsx)("option",{value:e.toLowerCase(),children:e},t.id+e)}))}):void 0},e.createKey=function(e,t){return e.id+(t.path||t.key)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns,r=t.rowProps,s=t.columnProps,c=t.editItem;return Object(v.jsx)("tbody",{children:n.map((function(t){return Object(v.jsx)("tr",{className:t.checked?r.rowCheckedClass:"",children:a.map((function(n){return Object(v.jsx)("td",{children:!0===n.editable&&t.id===c.id?e.renderEditCell(t,n,s,n.editType,n.editData,c):e.renderCell(t,n,s,c)},e.createKey(t,n))}))},t.id)}))})}}]),n}(a.Component),P=function(e){var t=e.columns,n=e.sortColumn,a=e.onSort,r=e.data,s=e.rowProps,c=e.columnProps,i=e.editItem;return Object(v.jsxs)("table",{className:"table table-hover",style:{overflow:"scroll"},children:[Object(v.jsx)(N,{columns:t,sortColumn:n,onSort:a,columnProps:c,rowProps:s}),Object(v.jsx)(y,{data:r,columns:t,columnProps:c,editItem:i,rowProps:s})]})},w=(n(54),function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).columns=[{path:"check",label:function(t){return e.getCheckAllContent(t)},key:"check",content:function(t,n){return e.getCheckContent(t,n)},enableSort:!1,editable:!1},{path:"name",label:"Name",enableSort:!0,editable:!0,editType:"inputText",editData:""},{path:"email",label:"Email",enableSort:!0,editable:!0,editType:"inputText",editData:""},{path:"role",label:"Role",enableSort:!0,editable:!0,editType:"inputSelect",editData:["Admin","Member"]},{path:"actions",label:"Actions",key:"actions",content:function(t,n,a){return e.getActionsContent(t,n,a)},enableSort:!1,editable:!1}],e.getCheckAllContent=function(e){return Object(v.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.pageSize===e.checkedUsersCount,id:"allUsersOnPage",onChange:function(t){return e.handleAllCheck(t.target.checked)}})},e.getCheckContent=function(e,t){return Object(v.jsx)("div",{className:"form-check",children:Object(v.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.checked,id:e.id,onChange:function(n){return t.handleCheck(n.target.checked,e)}})})},e.getActionsContent=function(e,t,n){return n?Object(v.jsxs)("div",{className:"mt-2",children:[Object(v.jsx)("i",{className:"bi bi-check-lg text-primary",onClick:function(){return t.handleEditCompleted()}}),Object(v.jsx)("i",{className:"bi bi-x-lg text-danger mx-2",onClick:function(){return t.handleEditCancel()}})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)("i",{className:"bi bi-pencil-square text-primary",onClick:function(){return t.handleEditUser(e)}}),Object(v.jsx)("i",{className:"bi bi-trash text-danger mx-2",onClick:function(){return t.handleDeleteUser(e)}})]})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.users,n=e.onSort,a=e.sortColumn,r=e.editUser,s=e.pageSize,c=e.checkedUsersCount,i=e.handleCheck,l=e.handleAllCheck,o=e.handleDeleteUser,d=e.handleEditUser,u=e.handleEditCompleted,h=e.handleEditCancel,p=e.handleUpdateUser,b={checkedUsersCount:c,pageSize:s,handleCheck:i,handleAllCheck:l,handleDeleteUser:o,handleEditUser:d,handleEditCompleted:u,handleEditCancel:h,handleUpdateUser:p,handleItemUpdateData:p};return Object(v.jsx)(P,{columns:this.columns,data:t,onSort:n,sortColumn:a,rowProps:{rowCheckedClass:"th-background"},columnProps:b,editItem:r})}}]),n}(a.Component)),E=function(e){var t=e.value,n=e.onChange,a=e.onFocus,r=e.totalCount,s=e.placeholder;return Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("input",{type:"text",value:t,className:"form-control",placeholder:s,onChange:function(e){return n(e.currentTarget.value)},onFocus:function(e){return a(e)}}),Object(v.jsxs)("span",{className:"input-group-text",children:["Total users \xa0\xa0",Object(v.jsx)("span",{className:"badge bg-primary",children:r})]})]})},D=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={users:[],pageSize:10,currentPage:1,searchQuery:"",selectedUser:null,sortColumn:{path:"name",order:"asc"},isLoading:!1,checkedUsers:[],editUser:{},shouldSort:!1},e.handleUserSelect=function(t){e.setState({selectedUser:t,searchQuery:"",currentPage:1})},e.handleSearch=function(t){e.state.editUser.id||(e.handleResetAllCheckedUsers(),e.setState({searchQuery:t,selectedUser:null,currentPage:1}))},e.handleSearchFocus=function(){if(e.state.editUser.id)return i.c.error("Please update or discard the user changes")},e.handleSort=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard the user changes");e.handleResetAllCheckedUsers(),e.setState({sortColumn:t,shouldSort:!0})},e.handlePageChange=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard the user changes");e.handleResetAllCheckedUsers(),e.setState({currentPage:t})},e.handleCheck=function(t,n){if(t){var a=[].concat(Object(h.a)(e.state.checkedUsers),[n.id]);e.setState({checkedUsers:a})}else{var r=Object(h.a)(e.state.checkedUsers);r=r.filter((function(e){return e!==n.id})),e.setState({checkedUsers:r})}},e.handleAllCheck=function(t){var n=e.getPagedData().data,a=[];n&&n.length&&t&&(a=n.map((function(e){return e.id}))),e.setState({checkedUsers:a})},e.handleResetAllCheckedUsers=function(){e.setState({checkedUsers:[]})},e.handleEditUser=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard the user changes");e.setState({editUser:t})},e.handleUpdateUser=function(t,n){var a=Object(u.a)({},e.state.editUser);a[n]=t.target.value,e.setState({editUser:a})},e.handleEditCompleted=function(){var t=Object(h.a)(e.state.users),n=e.state.editUser;t=t.map((function(e){return e.id===n.id&&(e=n),e})),e.setState({users:t,editUser:{},shouldSort:!1}),i.c.success("User details updated")},e.handleEditCancel=function(){e.setState({editUser:{}}),i.c.info("User details discarded")},e.handleDeleteUser=function(t){var n=t.id;if(e.state.editUser.id)return i.c.error("Please update or discard the user changes");var a=Object(h.a)(e.state.users);a=a.filter((function(e){return e.id!==n})),e.setState({users:a}),i.c.info("User deleted",{position:i.c.POSITION.TOP_RIGHT})},e.handleDeleteCheckedUsers=function(){if(e.state.editUser.id)return i.c.error("Please update or discard the user changes");var t=Object(h.a)(e.state.checkedUsers),n=e.state.users;t.length?(n=n.filter((function(e){return!t.includes(e.id)})),i.c.info("".concat(t.length," ").concat(t.length>1?"users":"user"," deleted"),{position:i.c.POSITION.TOP_RIGHT}),e.setState({users:n,checkedUsers:[]}),e.handleResetAllCheckedUsers()):i.c.error("Please select user(s) to delete",{transition:i.a})},e.getPagedData=function(){var t=e.state,n=t.pageSize,a=t.currentPage,r=t.users,s=t.selectedUser,c=t.searchQuery,i=t.sortColumn,l=t.shouldSort,o=t.checkedUsers,d=r||[];c?d=r.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase())||e.role.toLowerCase().includes(c.toLowerCase())})):s&&s.id&&(d=r.filter((function(e){return e._id===s._id})));var u=S(l?f.a.orderBy(d,[i.path],[i.order]):d,a,n);return u=o.length?u.map((function(e){return e.checked=o.includes(e.id),e})):u.map((function(e){return e.checked=!1,e})),{totalCount:d.length,data:u}},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){var t,n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,k.get("/adminui-problem/members.json");case 4:t=e.sent,n=t.data,setTimeout((function(){return a.setState({users:n,isLoading:!1})}),2e3),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),i.c.error("Error while fetching users"),this.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.pageSize,n=e.currentPage,a=e.sortColumn,s=e.checkedUsers,c=e.editUser,i=this.getPagedData(),l=i.totalCount,o=i.data;return this.state.isLoading?Object(v.jsx)("div",{className:"spinner-grow text-primary position-absolute bottom-50 end-50",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):(!o.length&&n>1&&this.handlePageChange(n-1),Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)("div",{className:"row mt-5",children:Object(v.jsx)(E,{value:this.state.searchQuery,onChange:this.handleSearch,onFocus:this.handleSearchFocus,totalCount:l,placeholder:"Search by name, email, role"})}),o.length?Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)("div",{className:"row mx-1",style:{overflowX:"auto"},children:Object(v.jsx)(w,{users:o,sortColumn:a,checkedUsersCount:s.length,editUser:c,pageSize:t,onDelete:this.handleDelete,onSort:this.handleSort,handleDeleteUser:this.handleDeleteUser,handleCheck:this.handleCheck,handleAllCheck:this.handleAllCheck,handleEditUser:this.handleEditUser,handleUpdateUser:this.handleUpdateUser,handleEditCompleted:this.handleEditCompleted,handleEditCancel:this.handleEditCancel})}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-md-3 col-xs-12 mb-2",children:Object(v.jsxs)("button",{type:"button",className:"btn btn-outline-danger",onClick:this.handleDeleteCheckedUsers,children:["Delete selected"," ",s.length>0&&Object(v.jsx)("span",{className:"badge bg-danger",children:s.length})]})}),Object(v.jsx)("div",{className:"col-md-9 col-xs-12",children:Object(v.jsx)(U,{itemsCount:l,pageSize:t,onPageChange:this.handlePageChange,currentPage:n})})]})]}):Object(v.jsx)("span",{className:"badge bg-danger mb-5",children:"No user(s) found"})]}))}}]),n}(a.Component);n(55);var A=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(i.b,{}),Object(v.jsx)("nav",{className:"navbar navbar-light bg-primary",children:Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsx)("a",{className:"navbar-brand text-light",children:"Admin-UI"})})}),Object(v.jsx)("div",{className:"mx-5",children:Object(v.jsx)(D,{})})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(A,{})}),document.getElementById("root")),T()}},[[56,1,2]]]);
//# sourceMappingURL=main.eb73f2b9.chunk.js.map