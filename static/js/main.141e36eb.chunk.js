(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{30:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(11),c=n.n(s),i=(n(28),n(29),n(30),n(2)),l=(n(31),n(14)),o=n.n(l),d=n(23),u=n(12),h=n(10),p=n(4),b=n(5),j=n(7),m=n(6),g=n(9),f=n.n(g),C=n(8),O=n.n(C);var x={log:function(e){console.error(e)}};O.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"/admin-ui",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).ADMIN_UI_API_URL||"https://geektrust.s3-ap-southeast-1.amazonaws.com",O.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(x.log(e),i.c.error("An unexpected error occurrred.")),Promise.reject(e)}));var v={get:O.a.get,post:O.a.post,put:O.a.put,delete:O.a.delete};var k=n(0),U=function(e){var t=e.itemsCount,n=e.pageSize,r=e.currentPage,a=e.onPageChange,s=Math.ceil(t/n);if(1===s)return null;var c=f.a.range(1,s+1);return Object(k.jsx)("div",{className:"float-end",children:Object(k.jsx)("nav",{"aria-label":"Page navigation",children:Object(k.jsxs)("ul",{className:"pagination",children:[Object(k.jsx)("li",{className:1===r?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"first",onClick:function(){return a(1)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),Object(k.jsx)("li",{className:1===r?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"Previous",onClick:function(){return a(r-1)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:"<"})})}),c.map((function(e){return Object(k.jsx)("li",{className:e===r?"page-item active":"page-item",children:Object(k.jsx)("a",{onClick:function(){return a(e)},className:"page-link",children:e})},e)})),Object(k.jsx)("li",{className:r===c.length?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"Next",onClick:function(){return a(r+1)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:">"})})}),Object(k.jsx)("li",{className:r===c.length?"page-item disabled":"page-item",children:Object(k.jsx)("a",{className:"page-link","aria-label":"last",onClick:function(){return a(c.length)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})})};function S(e,t,n){var r=(t-1)*n;return e.slice(r,r+n)}var N=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).raiseSort=function(t,n){if(n){var r=Object(u.a)({},e.props.sortColumn);r.path===t?r.order="asc"===r.order?"desc":"asc":(r.path=t,r.order="asc"),e.props.onSort(r)}},e.renderSortIcon=function(t){return t.path!==e.props.sortColumn.path?null:"asc"===e.props.sortColumn.order?Object(k.jsx)("i",{className:"bi bi-sort-alpha-down"}):Object(k.jsx)("i",{className:"bi bi-sort-alpha-up"})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(k.jsx)("thead",{children:Object(k.jsx)("tr",{children:this.props.columns.map((function(t){return Object(k.jsxs)("th",{className:"clickable",onClick:function(){return e.raiseSort(t.path,t.enableSort)},children:[t.label instanceof Function?t.label(e.props.columnProps):t.label,"\xa0",e.renderSortIcon(t)]},t.path||t.key)}))})})}}]),n}(r.Component),P=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).renderCell=function(e,t,n,r){return t.content?t.content(e,n,e.id===r.id):f.a.get(e,t.path)},e.renderEditCell=function(t,n,r,a,s,c){return"inputText"===a?Object(k.jsx)("div",{className:"input-group",children:Object(k.jsx)("input",{type:"text",className:"form-control",value:c[n.path],onChange:function(e){r.handleItemUpdateData(e,n.path,t)}})}):"inputSelect"===a?Object(k.jsx)("select",{id:e.createKey(t,n),className:"form-select",name:n.path||n.key,value:c[n.path],onChange:function(e){return r.handleItemUpdateData(e,n.path,t)},children:s.map((function(e){return Object(k.jsx)("option",{value:e.toLowerCase(),children:e},t.id+e)}))}):void 0},e.createKey=function(e,t){return e.id+(t.path||t.key)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.columns,a=t.rowProps,s=t.columnProps,c=t.editItem;return Object(k.jsx)("tbody",{children:n.map((function(t){return Object(k.jsx)("tr",{className:t.checked?a.rowCheckedClass:"",children:r.map((function(n){return Object(k.jsx)("td",{children:!0===n.editable&&t.id===c.id?e.renderEditCell(t,n,s,n.editType,n.editData,c):e.renderCell(t,n,s,c)},e.createKey(t,n))}))},t.id)}))})}}]),n}(r.Component),y=function(e){var t=e.columns,n=e.sortColumn,r=e.onSort,a=e.data,s=e.rowProps,c=e.columnProps,i=e.editItem;return Object(k.jsxs)("table",{className:"table table-hover",style:{overflow:"scroll"},children:[Object(k.jsx)(N,{columns:t,sortColumn:n,onSort:r,columnProps:c,rowProps:s}),Object(k.jsx)(P,{data:a,columns:t,columnProps:c,editItem:i,rowProps:s})]})},w=(n(54),function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).columns=[{path:"check",label:function(t){return e.getCheckAllContent(t)},key:"check",content:function(t,n){return e.getCheckContent(t,n)},enableSort:!1,editable:!1},{path:"name",label:"Name",enableSort:!0,editable:!0,editType:"inputText",editData:""},{path:"email",label:"Email",enableSort:!0,editable:!0,editType:"inputText",editData:""},{path:"role",label:"Role",enableSort:!0,editable:!0,editType:"inputSelect",editData:["Admin","Member"]},{path:"actions",label:"Actions",key:"actions",content:function(t,n,r){return e.getActionsContent(t,n,r)},enableSort:!1,editable:!1}],e.getCheckAllContent=function(e){return Object(k.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.usersCount===e.checkedUsersCount,id:"checkAllUsers",onChange:function(t){return e.handleAllCheck(t.target.checked)}})},e.getCheckContent=function(e,t){return Object(k.jsx)("div",{className:"form-check",children:Object(k.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.checked,id:e.id,onChange:function(n){return t.handleCheck(n.target.checked,e)}})})},e.getActionsContent=function(e,t,n){return n?Object(k.jsxs)("div",{className:"mt-2",children:[Object(k.jsx)("i",{className:"bi bi-check-lg text-primary",onClick:function(){return t.handleEditCompleted()}}),Object(k.jsx)("i",{className:"bi bi-x-lg text-danger mx-2",onClick:function(){return t.handleEditCancel()}})]}):Object(k.jsxs)("div",{children:[Object(k.jsx)("i",{className:"bi bi-pencil-square text-primary",onClick:function(){return t.handleEditUser(e)}}),Object(k.jsx)("i",{className:"bi bi-trash text-danger mx-2",onClick:function(){return t.handleDeleteUser(e)}})]})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.users,n=e.onSort,r=e.sortColumn,a=e.editUser,s=e.usersCount,c=e.checkedUsersCount,i=e.handleCheck,l=e.handleAllCheck,o=e.handleDeleteUser,d=e.handleEditUser,u=e.handleEditCompleted,h=e.handleEditCancel,p=e.handleUpdateUser,b={checkedUsersCount:c,usersCount:s,handleCheck:i,handleAllCheck:l,handleDeleteUser:o,handleEditUser:d,handleEditCompleted:u,handleEditCancel:h,handleUpdateUser:p,handleItemUpdateData:p};return Object(k.jsx)(y,{columns:this.columns,data:t,onSort:n,sortColumn:r,rowProps:{rowCheckedClass:"th-background"},columnProps:b,editItem:a})}}]),n}(r.Component)),D=function(e){var t=e.value,n=e.onChange,r=e.onFocus,a=e.totalCount,s=e.placeholder;return Object(k.jsxs)("div",{className:"input-group mb-3",children:[Object(k.jsx)("input",{type:"text",value:t,className:"form-control",placeholder:s,onChange:function(e){return n(e.currentTarget.value)},onFocus:function(e){return r(e)}}),Object(k.jsxs)("span",{className:"input-group-text",children:["Total users \xa0\xa0",Object(k.jsx)("span",{className:"badge bg-primary",children:a})]})]})},E=function(e){Object(j.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={users:[],pageSize:10,currentPage:1,searchQuery:"",sortColumn:{path:"name",order:"asc"},isLoading:!1,checkedUsers:[],editUser:{},shouldSort:!1},e.handleSearch=function(t){e.state.editUser.id||(e.handleResetAllCheckedUsers(),e.setState({searchQuery:t,currentPage:1}))},e.handleSearchFocus=function(){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes")},e.handleSort=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");e.handleResetAllCheckedUsers(),e.setState({sortColumn:t,shouldSort:!0})},e.handlePageChange=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");e.handleResetAllCheckedUsers(),e.setState({currentPage:t})},e.handleCheck=function(t,n){if(t){var r=[].concat(Object(h.a)(e.state.checkedUsers),[n.id]);e.setState({checkedUsers:r})}else{var a=Object(h.a)(e.state.checkedUsers);a=a.filter((function(e){return e!==n.id})),e.setState({checkedUsers:a})}},e.handleAllCheck=function(t){var n=e.getPagedData().data,r=[];n&&n.length&&t&&(r=n.map((function(e){return e.id}))),e.setState({checkedUsers:r})},e.handleResetAllCheckedUsers=function(){e.setState({checkedUsers:[]})},e.handleEditUser=function(t){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");e.setState({editUser:t})},e.handleUpdateUser=function(t,n){var r=Object(u.a)({},e.state.editUser);r[n]=t.target.value,e.setState({editUser:r})},e.handleEditCompleted=function(){var t=Object(h.a)(e.state.users),n=e.state.editUser;t=t.map((function(e){return e.id===n.id&&(e=n),e})),e.setState({users:t,editUser:{},shouldSort:!1}),i.c.success("User details updated")},e.handleEditCancel=function(){e.setState({editUser:{}}),i.c.info("User details discarded")},e.handleDeleteUser=function(t){var n=t.id;if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");var r=Object(h.a)(e.state.users);r=r.filter((function(e){return e.id!==n})),e.setState({users:r}),i.c.info("User deleted",{position:i.c.POSITION.TOP_RIGHT})},e.handleDeleteCheckedUsers=function(){if(e.state.editUser.id)return i.c.error("Please update or discard existing user changes");var t=Object(h.a)(e.state.checkedUsers),n=e.state.users;t.length?(n=n.filter((function(e){return!t.includes(e.id)})),i.c.info("".concat(t.length," ").concat(t.length>1?"users":"user"," deleted"),{position:i.c.POSITION.TOP_RIGHT}),e.setState({users:n,checkedUsers:[]}),e.handleResetAllCheckedUsers()):i.c.error("Please select user(s) to delete",{transition:i.a})},e.getPagedData=function(){var t=e.state,n=t.pageSize,r=t.currentPage,a=t.users,s=t.searchQuery,c=t.sortColumn,i=t.shouldSort,l=t.checkedUsers,o=a||[];s&&(o=a.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.role.toLowerCase().includes(s.toLowerCase())})));var d=S(i?f.a.orderBy(o,[c.path],[c.order]):o,r,n);return d=l.length?d.map((function(e){return e.checked=l.includes(e.id),e})):d.map((function(e){return e.checked=!1,e})),{totalCount:o.length,data:d}},e.renderLoader=function(){return Object(k.jsx)("div",{className:"spinner-grow text-primary position-absolute bottom-50 end-50",role:"status",children:Object(k.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},e.renderSearchBox=function(t){return Object(k.jsx)("div",{className:"row mt-5",children:Object(k.jsx)("div",{className:"row mt-5",children:Object(k.jsx)(D,{value:e.state.searchQuery,onChange:e.handleSearch,onFocus:e.handleSearchFocus,totalCount:t,placeholder:"Search by name, email, role"})})})},e.renderNoUserFound=function(){return Object(k.jsx)("span",{className:"badge bg-danger mb-5",children:"No user(s) found"})},e.renderUserTable=function(t){var n=e.state,r=n.sortColumn,a=n.checkedUsers,s=n.editUser;return Object(k.jsx)("div",{className:"row mx-1",style:{overflowX:"auto"},children:Object(k.jsx)(w,{users:t,sortColumn:r,checkedUsersCount:a.length,editUser:s,usersCount:t.length,onDelete:e.handleDelete,onSort:e.handleSort,handleDeleteUser:e.handleDeleteUser,handleCheck:e.handleCheck,handleAllCheck:e.handleAllCheck,handleEditUser:e.handleEditUser,handleUpdateUser:e.handleUpdateUser,handleEditCompleted:e.handleEditCompleted,handleEditCancel:e.handleEditCancel})})},e.renderDeleteSelectedUser=function(){var t=e.state.checkedUsers;return Object(k.jsx)("div",{className:"col-md-3 col-xs-12 mb-2",children:Object(k.jsxs)("button",{type:"button",className:"btn btn-outline-danger",onClick:e.handleDeleteCheckedUsers,children:["Delete selected"," ",t.length>0&&Object(k.jsx)("span",{className:"badge bg-danger",children:t.length})]})})},e.renderPagination=function(t){var n=e.state,r=n.pageSize,a=n.currentPage;return Object(k.jsx)("div",{className:"col-md-9 col-xs-12",children:Object(k.jsx)(U,{itemsCount:t,pageSize:r,onPageChange:e.handlePageChange,currentPage:a})})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){var t,n,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.prev=1,e.next=4,v.get("/adminui-problem/members.json");case 4:t=e.sent,n=t.data,setTimeout((function(){return r.setState({users:n,isLoading:!1})}),2e3),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),i.c.error("Error while fetching users"),this.setState({isLoading:!1});case 14:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.getPagedData(),t=e.totalCount,n=e.data;return this.state.isLoading?this.renderLoader():(!n.length&&this.state.currentPage>1&&this.handlePageChange(this.state.currentPage-1),Object(k.jsxs)(a.a.Fragment,{children:[this.renderSearchBox(t),n.length?Object(k.jsxs)(a.a.Fragment,{children:[this.renderUserTable(n),Object(k.jsxs)("div",{className:"row",children:[this.renderDeleteSelectedUser(),this.renderPagination(t)]})]}):this.renderNoUserFound()]}))}}]),n}(r.Component);n(55);var A=function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)(i.b,{}),Object(k.jsx)("nav",{className:"navbar navbar-light bg-primary",children:Object(k.jsx)("div",{className:"container-fluid",children:Object(k.jsx)("a",{className:"navbar-brand text-light",children:"Admin-UI"})})}),Object(k.jsx)("div",{className:"mx-5",children:Object(k.jsx)(E,{})})]})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(A,{})}),document.getElementById("root")),T()}},[[56,1,2]]]);
//# sourceMappingURL=main.141e36eb.chunk.js.map